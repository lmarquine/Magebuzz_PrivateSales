<?php/** @copyright Copyright (c) 2016 www.magebuzz.com*/class Magebuzz_Privatesale_Block_Invite extends Mage_Core_Block_Template {  public function __construct() {    parent::__construct();    $collection = Mage::getModel('privatesale/invite')->getCollection()->addFieldToFilter('referer_id', Mage::getSingleton('customer/session')->getId());    $this->setCollection($collection);  }  public function getInviteCollection() {    return Mage::getModel('privatesale/invite')->getCollection()->addFieldToFilter('referer_id', Mage::getSingleton('customer/session')->getId())->getData();  }  public function getCountInvite() {    return count($this->getInviteCollection());  }  public function _prepareLayout() {    parent::_prepareLayout();    $collection = $this->getCollection()->setCurPage(1);    $pager = $this->getLayout()->createBlock('page/html_pager', 'invite.pager')->setCollection($collection);    $this->setChild('pager', $pager);    return $this;  }  public function getPagerHtml() {    return $this->getChildHtml('pager');  }  public function checkUserPermission() {    if (Mage::helper('customer')->isLoggedIn()) {      $currentCustomerGroup = Mage::getModel('customer/session')->getCustomerGroupId();      $allowedGroups = Mage::getStoreConfig('privatesalesession/privatesale_options/group_can_invite');      $allowedGroups = explode(',', $allowedGroups);      if (in_array($currentCustomerGroup, $allowedGroups)) {        if (Mage::getStoreConfig('privatesalesession/privatesale_options/allow_user_to_invite') == '1') {          return TRUE;        } else {          return FALSE;        }      } else {        return FALSE;      }    } else {      return FALSE;    }  }}